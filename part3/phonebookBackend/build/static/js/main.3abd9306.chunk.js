(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{14:function(e,t,n){e.exports=n(37)},19:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(13),c=n.n(o),u=(n(19),n(2)),l=function(e){var t=e.filter,n=e.handleFilter;return r.a.createElement("div",null,"filter shown with",r.a.createElement("input",{value:t,onChange:n}))},i=function(e){var t=e.person,n=e.deleteContactById;return r.a.createElement("li",null,t.name," ",t.number,r.a.createElement("button",{onClick:function(){return n(t)}},"Delete"))},m=function(e){var t=e.persons,n=e.deleteContactById;return r.a.createElement("ul",null,t.map((function(e){return r.a.createElement(i,{key:e.name,person:e,deleteContactById:n})})))},s=function(e){var t=e.message;return null===t?null:r.a.createElement("div",{className:t.style},t.text)},f=function(e){var t=e.newName,n=e.newNumber,a=e.handleNewName,o=e.handleNewNumber,c=e.addContact;return r.a.createElement("form",{onSubmit:c},r.a.createElement("div",null,"name:",r.a.createElement("input",{value:t,onChange:a})),r.a.createElement("div",null,"number:",r.a.createElement("input",{value:n,onChange:o})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"Add")))},d=n(3),h=n.n(d),b="/api/persons",p=function(){return h.a.get(b).then((function(e){return e.data}))},v=function(e){return h.a.post(b,e).then((function(e){return e.data}))},E=function(e,t){return h.a.put("".concat(b,"/").concat(e),t).then((function(e){return e.data}))},w=function(e){return h.a.delete("".concat(b,"/").concat(e)).then((function(e){return e.data}))},g=function(){var e=Object(a.useState)([]),t=Object(u.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)(""),i=Object(u.a)(c,2),d=i[0],h=i[1],b=Object(a.useState)(""),g=Object(u.a)(b,2),y=g[0],N=g[1],j=Object(a.useState)(""),O=Object(u.a)(j,2),C=O[0],k=O[1],S=Object(a.useState)(null),x=Object(u.a)(S,2),I=x[0],B=x[1],T=Object(a.useState)([]),A=Object(u.a)(T,2),D=A[0],F=A[1];Object(a.useEffect)((function(){p().then((function(e){o(e)}))}),[]),Object(a.useEffect)((function(){F(n.filter((function(e){return e.name.toUpperCase().includes(C.toUpperCase())})))}),[C,n]);var J=function(e){var t=window.confirm("".concat(e.name," is already added to phonebook, replace the old number with a new one?")),a=n.filter((function(t){return t.name===e.name}))[0].id;t&&E(a,e).then((function(e){o(n.map((function(t){return t.id!==a?t:e}))),h(""),N(""),k(""),B({text:"Number of ".concat(e.name," has been updated"),style:"messageSuccess"}),setTimeout((function(){B(null)}),5e3)})).catch((function(){B({text:"Information of ".concat(e.name," has already been removed from server"),style:"messageError"}),setTimeout((function(){B(null)}),5e3)}))};return r.a.createElement("div",null,r.a.createElement("h1",null,"Phonebook"),r.a.createElement(s,{message:I}),r.a.createElement(l,{filter:C,handleFilter:function(e){k(e.target.value)}}),r.a.createElement("h3",null,"Add a new"),r.a.createElement(f,{newName:d,newNumber:y,handleNewName:function(e){h(e.target.value)},handleNewNumber:function(e){N(e.target.value)},addContact:function(e){e.preventDefault();var t={name:d,number:y};n.some((function(e){return e.name===t.name}))?J(t):v(t).then((function(e){o(n.concat(e)),h(""),N(""),k(""),B({text:"Added ".concat(e.name),style:"messageSuccess"}),setTimeout((function(){B(null)}),5e3)})).catch((function(e){B({text:"".concat(e.response.data.error),style:"messageError"}),setTimeout((function(){B(null)}),5e3)}))}}),r.a.createElement("h3",null,"Numbers"),r.a.createElement(m,{persons:D,deleteContactById:function(e){window.confirm("Do you want do delete ".concat(e.name," from the list ?"))&&w(e.id).then((function(){o(n.filter((function(t){return t.id!==e.id}))),h(""),N(""),k("")})).catch((function(){B({text:"Information of ".concat(e.name," has already been removed from server"),style:"messageError"}),setTimeout((function(){B(null)}),5e3)}))}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(g,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[14,1,2]]]);
//# sourceMappingURL=main.3abd9306.chunk.js.map